<template name="editLibraryForm">
  {{#with library}}
  <section class="content flex flexContainer">
    <form class="flexContainer flexColumn">
      <footer class="submitContainer topContainer flexContainer">
        <a href="{{libraryPath}}">‹ Zurück zur Bibliothek</a>
        <div class="flex"></div>
        <p class="info">Änderungen werden autom. gespeichert.</p>
{{!         <input type="submit" value="Änderungen speichern"> }}
      </footer>
      {{>message}}
      <div class="inner flex scrollable">
        <h1>Formular bearbeiten</h1>
        <fieldset>
          {{#each fields}}
            {{>editLibraryFormField}}
          {{else}}
            Bisher gibt es keine Felder in diesem Formular. Legen Sie jetzt das erste Feld an.
          {{/each}}
        </fieldset>
        <fieldset>
          <select id="addInputType">
            {{#each fieldTypeGroups}}
            <optgroup label="{{label}}">
              {{#each fieldTypes}}
              <option value="{{type}}" {{#unless available}}disabled{{/unless}}> {{label}}</option>
              {{/each}}
            </optgroup>
            {{/each}}
          </select>
          <input type="button" id="addInput" value="Feld hinzufügen"></fieldset>
      </div>
    </form>
  </section>
  {{/with}}
</template>

<template name="editLibraryFormField">
  <div class="fieldContainer">
    <a class="remove" data-icon="d">{{type}}</a>
    <input type="text" name="title" id="title" class="title" value="{{title}}" placeholder="Titel" autocomplete="off">
    <input type="text" name="description" id="description"  class="description" value="{{description}}" placeholder="Beschreibung" autocomplete="off">
    {{{field}}}
    <input type="checkbox" name="required" id="required" {{#if required}}checked{{/if}}> Pflichtfeld?
  </div>
</template>
