<template name="editLibraryItem">
  {{!  TODO: edit & create zusammenführen }}
  {{#with library}}
  <section class="content flex flexContainer">
    <form class="flexContainer flexColumn">
      <footer class="submitContainer topContainer flexContainer">
        <a href="{{libraryPath}}">‹ Zurück zur Bibliothek</a>
        <div class="flex"></div>
        <p class="info">Änderungen werden autom. gespeichert.</p>
      </footer>
      {{>message}}
      <div class="inner flex scrollable">
        <h1>Eintrag bearbeiten</h1>
        {{#with libraryItem}}
          <h3>Dieser Eintrag wurde <abbr title="{{createdAt}}">{{createdAt}}</abbr> von {{#with getUser createdBy}}<a href="{{showContactPath}}">{{profile.name}}</a>{{/with}} erstellt {{#if updatedAt}}<br>und <abbr title="{{updatedAt}}">{{updatedAt}}</abbr> von {{#with getUser updatedBy}}<a href="{{showContactPath}}">{{profile.name}}</a>{{/with}} bearbeitet{{/if}}.</h3>
        {{/with}}
        <fieldset>
          {{#each fields}}
            {{>editLibraryItemField}}
          {{else}}
            Bisher gibt es keine Felder in diesem Formular. Legen Sie jetzt das erste Feld an.
          {{/each}}
        </fieldset>
      </div>
    </form>
  </section>
  {{/with}}
</template>

<template name="editLibraryItemField">
  <label for="{{_id}}">
    {{title}}
    <small>{{description}}</small>
  </label>
  {{{field}}}
</template>
